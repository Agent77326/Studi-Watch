<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="copyright" content='Leo Jung, 2020'/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, shrink-to-fit=no"/>
    <meta name="robots" content="noindex, nofollow"/>
    <meta name="author" content="Leo Jung"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
          crossorigin="anonymous">
    <title>Raum</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.3/plyr.css"/>

    <link rel="stylesheet" href="../index.css">
    <link rel="stylesheet" href="room.css">
</head>

<body>
<nav class="navbar sticky-top navbar-dark mb-1">
    <a class="navbar-brand" href="../">
        Studi-Watch
    </a>

    <nav class="navbar-nav" id="mute-info">
        <button type="button" class="btn btn-outline-danger" onclick="clickedEvent()">
            Stummschaltung aufheben
        </button>
    </nav>

    <nav class="navbar-nav">
        <button type="button" class="btn btn-warning border-dark" data-toggle="modal" data-target="#invite-modal">
            <span>Teilen</span>
            <img src="https://img.icons8.com/ios-filled/30/000000/add-user-group-man-man--v1.png"/>
        </button>
    </nav>
</nav>

<noscript>
    <div class="container">
        <div class="alert alert-danger">
            Javascript muss aktiviert sein.
        </div>
    </div>
</noscript>

<!-- Modal -->
<div class="modal fade" id="invite-modal" tabindex="-1" role="dialog" aria-labelledby="modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content bg-dark border-dark">
            <div class="modal-header">
                <h5 class="modal-title" id="invite-modal-title">
                    Lade deine Freunde ein
                </h5>
            </div>
            <div class="modal-body">
                <label for="invite-link">
                    Teile den Link, damit noch mehr als <kbd id="user-count">0</kbd> Personen im Raum sein können
                </label>
                <div class="input-group">
                    <input type="text" readonly class="form-control" value="Loading..."
                           aria-describedby="invite-link-button" id="invite-link" autofocus>
                    <div class="input-group-append">
                        <button class="btn btn-warning" type="button" id="invite-link-button" onclick="copyLink()">
                            Copy
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" data-dismiss="modal">Schließen</button>
            </div>
        </div>
    </div>
</div>

<div id="root" style="display: none;">
    <div class="container-fluid mt-3 mb-5">
        <div class="row">
            <div class="col-md-8 col-xl-9 mb-2">
                <div class="d-flex justify-content-center m-5" id="join-loader">
                        <span class="spinner-border text-danger" style="width: 5rem; height: 5rem;" role="status"
                              aria-hidden="true"></span>
                    <span class="m-3 h4">Trete Raum bei...</span>
                </div>

                <video id="video-player" style="display: none"></video>
                <h5 class="mt-2">
                    Als nächstes ist in der Playlist:
                </h5>
                <div></div>
            </div>
            <div class="col-md-4 col-xl-3 mb-2">
                <form id="controls" style="display: none;">
                    <div class="form-group">
                        <label for="video-input">Füge einen Video-Link ein</label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Video-Link"
                                   aria-describedby="video-go-button" id="video-input">
                            <div class="input-group-append">
                                <div class="btn-group" role="group">
                                    <button class="btn btn-warning" type="submit" id="video-go-button">
                                        Watch
                                    </button>
                                    <div class="btn-group" role="group" id="addDropdown">
                                        <button id="btnAddDropdown" type="button"
                                                class="btn btn-warning dropdown-toggle dropdown-toggle-split"
                                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                                data-reference="parent"></button>
                                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="btnAddDropdown">
                                            <a class="dropdown-item" onclick="updateCountryCode()">
                                                Zur Playlist hinzufügen
                                            </a>
                                            <a class="dropdown-item" onclick="updateCountryCode()">
                                                Als nächstes Abspielen
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-auto" id="randomGroup">
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-warning" id="random-button">Random</button>
                                <div class="btn-group" role="group" id="countryDropdown">
                                    <button id="btnCountryDropdown" type="button"
                                            class="btn btn-warning dropdown-toggle dropdown-toggle-split"
                                            data-toggle="dropdown"></button>
                                    <div class="dropdown-menu" aria-labelledby="btnCountryDropdown"
                                         style="max-height: 500px; overflow-y: scroll;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-warning" type="button" data-toggle="collapse"
                                    data-target="#collapseHelp"
                                    aria-expanded="false">
                                Help
                            </button>
                        </div>
                    </div>
                </form>

                <div class="collapse mt-2" id="collapseHelp">
                    <div class="alert alert-primary" role="alert">
                        <h4 class="alert-heading">Unterstützte Formate</h4>
                        <ul>
                            <li>
                                Youtube-Videos werden unterstützt, einfach den Link zur Seite oben einfügen
                            </li>
                            <li>
                                Alle Mediendateien, welche direkt im Browser abgespielt werden können (ohne embed)
                            </li>
                        </ul>
                        <hr>
                        <h4 class="alert-heading">Bekannte Probleme</h4>
                        <ul>
                            <li>
                                Das "Seeken" während der Player pausiert ist, wird nicht korrekt übermittelt. Es ist ein
                                manueller
                                Play/Pause Befehl erneut nötig.
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="mt-2" id="user-list"></div>
            </div>
        </div>
    </div>
</div>

<footer class="footer fixed-bottom bg-dark">
    <div class="container py-2">
        Copyright (c) 2020, Leo Jung, <a class="text-warning" data-toggle="collapse" href="#impressum">Impressum</a>
        <a class="float-right text-white" href="https://github.com/yasamato/studi-watch" target="_blank" rel="noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                 class="navbar-nav-svg d-inline-block align-text-top" viewBox="0 0 512 499.36" role="img"><title>
                GitHub</title>
                <path fill="currentColor" fill-rule="evenodd"
                      d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z"></path>
            </svg>
            <small class="d-md-none ml-2">GitHub</small>
        </a>
        <div class="collapse" id="impressum">
            <hr>
            <p>
                Es sollten alle modernen Browser unterstützt sein, welche mindestens
                <a class="text-warning" href="https://caniuse.com/#feat=es6" target="_blank">
                    ECMAScript 2015 (ES6)
                </a> ausführen können.
            </p>
            <p>
                Keine der verwendeten Medien ist in meinem Besitz oder von mir erstellt worden und gehört Ihren
                respektiven Erstellern.
                Für eingebundenen Medien und Inhalte, haften jeweils deren Betreiber oder Ersteller.
                Es werden keine personenbezogenen Daten auf diesem Server aufgezeichnet oder verarbeitet.
                Ausgenommen davon sind gesetzlich verpflichtende Daten, wie der Zeitpunkt und IP-Adresse einzelner
                Webseitenaufrufe in den Log-Dateien.
                Es findet eine temporäre Identifikation sowie Zwischenspeicherung der Daten statt, welche mit Verlassen
                des Raums automatisch gelöscht werden.
            </p>
            <ul>
                <li>
                    <a class="text-warning" href="https://getbootstrap.com/" target="_blank">Bootstrap 4</a>, MIT
                    License, docs CC BY 3.0
                </li>
                <li>
                    Icons by <a class="text-warning" href="https://icons8.com/" target="_blank">Icons8</a>
                </li>
                <li>
                    <a class="text-warning" href="https://jquery.org/" target="_blank">jQuery</a>, MIT License
                </li>
                <li>
                    <a class="text-warning" href="https://popper.js.org/" target="_blank">Popperjs</a>, MIT License
                </li>
                <li>
                    <a class="text-warning" href="https://github.com/sampotts/plyr" target="_blank">Plyr</a>, MIT
                    License
                </li>
                <li>
                    <a class="text-warning" href="https://socket.io/" target="_blank">Socket.IO</a>, MIT License
                </li>
            </ul>
        </div>
    </div>
</footer>

<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.plyr.io/3.6.3/plyr.js"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
<script src="https://apis.google.com/js/api.js"></script>
<script src="room.js"></script>
<script src="player.js"></script>
<script src="events.js"></script>
</body>
</html>
