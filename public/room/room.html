<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="copyright" content='Leo Jung, 2020'/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, shrink-to-fit=no"/>
    <meta name="robots" content="noindex, nofollow"/>
    <meta name="author" content="Leo Jung"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <title>Raum</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.2/plyr.css"/>

    <link rel="stylesheet" href="../index.css">
    <link rel="stylesheet" href="room.css">
</head>
<body>
<nav class="navbar sticky-top navbar-dark mb-1">
    <a class="navbar-brand" href="../">
        Studi-Watch
    </a>
    <div class="navbar-nav">
        <button type="button" class="btn btn-warning border-dark" data-toggle="modal" data-target="#invite-modal">
            <span>Teilen</span>
            <img src="https://img.icons8.com/ios-filled/30/000000/add-user-group-man-man--v1.png"/>
        </button>
    </div>
</nav>
<canvas id="background" class="position-fixed vh-100 vw-100" style="top:0; z-index: -1;"
        aria-label="Hintergrundbild"></canvas>
<noscript>
    <div class="container">
        <div class="alert alert-danger">
            Javascript muss aktiviert sein.
        </div>
    </div>
</noscript>

<!-- Modal -->
<div class="modal fade" id="invite-modal" tabindex="-1" role="dialog" aria-labelledby="modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content bg-dark border-dark">
            <div class="modal-header">
                <h5 class="modal-title" id="invite-modal-title">
                    Lade deine Freunde ein
                </h5>
            </div>
            <div class="modal-body">
                <label for="invite-link">
                    Teile den Link, damit noch mehr als <kbd id="user-count">0</kbd> Personen im Raum sein können
                </label>
                <div class="input-group">
                    <input type="text" readonly class="form-control" value="Loading..." aria-describedby="invite-link-button" id="invite-link" autofocus>
                    <div class="input-group-append">
                        <button class="btn btn-warning" type="button" id="invite-link-button" onclick="copyLink()">
                            Copy
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" data-dismiss="modal">Schließen</button>
            </div>
        </div>
    </div>
</div>

<div id="root" style="display: none;">
    <div class="container-fluid mt-3 mb-5">
        <div class="container" id="mute-info">
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                Der Player wurde automatisch stummgeschaltet, da der Browser eine vorherige Interaktion mit dem
                Medienelement erfordert.
                <div class="d-flex justify-content-center mt-2">
                    <button type="button" class="btn btn-danger" onclick="clickedEvent()">
                        Stummschaltung aufheben
                    </button>
                </div>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
        <div class="row">
            <div class="col-xl-3 mb-2">
                <form id="controls" style="display: none;">
                    <div class="form-row">
                        <div class="col-sm-8 col-md-5 col-lg-4 col-xl-auto">
                            <div class="form-group mb-0">
                                <label for="video-input">Füge einen Video-Link ein</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Video-Link"
                                           aria-describedby="video-go-button" id="video-input">
                                    <div class="input-group-append">
                                        <button class="btn btn-warning" type="submit" id="video-go-button">
                                            Watch
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto d-flex align-items-end mt-2" id="randomGroup">
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-warning" id="random-button">Random</button>
                                <div class="btn-group" role="group" id="countryDropdown">
                                    <button id="btnCountryDropdown" type="button"
                                            class="btn btn-warning dropdown-toggle"
                                            data-toggle="dropdown"></button>
                                    <div class="dropdown-menu" aria-labelledby="btnCountryDropdown"
                                         style="max-height: 500px; overflow-y: scroll;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto d-flex align-items-end mt-2">
                            <button class="btn btn-warning" type="button" data-toggle="collapse"
                                    data-target="#collapseHelp"
                                    aria-expanded="false">
                                Help
                            </button>
                        </div>
                    </div>
                </form>

                <div class="collapse mt-2" id="collapseHelp">
                    <div class="alert alert-primary" role="alert">
                        <h4 class="alert-heading">Unterstützte Formate</h4>
                        <ul>
                            <li>
                                Youtube-Videos werden unterstützt, einfach den Link zur Seite oben einfügen
                            </li>
                            <li>
                                Alle Mediendateien, welche direkt im Browser abgespielt werden können (ohne embed)
                            </li>
                        </ul>
                        <hr>
                        <h4 class="alert-heading">Bekannte Probleme</h4>
                        <ul>
                            <li>
                                Das "Seeken" während der Player pausiert ist, wird nicht korrekt übermittelt. Es ist ein
                                manueller
                                Play/Pause Befehl erneut nötig.
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-8 col-xl-6 mb-2">
                <div class="d-flex justify-content-center m-5" id="join-loader">
                        <span class="spinner-border text-danger" style="width: 5rem; height: 5rem;" role="status"
                              aria-hidden="true"></span>
                    <span class="m-3 h4">Trete Raum bei...</span>
                </div>

                <video id="video-player" style="display: none"></video>
            </div>

            <div class="col-md-4 col-xl-3 mb-2" id="user-list"></div>
        </div>
    </div>
</div>

<footer class="footer fixed-bottom bg-dark">
    <div class="container py-2">
        Copyright (c) 2020, Leo Jung, <a class="text-warning" data-toggle="collapse" href="#impressum">Impressum</a>
        <div class="collapse" id="impressum">
            <hr>
            <p>
                Es sollten alle modernen Browser unterstützt sein, welche mindestens
                <a class="text-warning" href="https://caniuse.com/#feat=es6" target="_blank">
                    ECMAScript 2015 (ES6)
                </a> ausführen können.
            </p>
            <p>
                Keine der verwendeten Medien ist in meinem Besitz oder von mir erstellt worden und gehört Ihren
                respektiven
                Erstellern.
                Für eingebundenen Medien und Inhalte, haften jeweils deren Betreiber oder Ersteller.
                Es werden keine personenbezogenen Daten auf diesem Server aufgezeichnet oder verarbeitet.
                Ausgenommen davon sind gesetzlich verpflichtende Daten, wie der Zeitpunkt und IP-Adresse einzelner
                Webseitenaufrufe in den Log-Dateien.
                Es findet eine temporäre Identifikation statt, welche serverseitig lediglich im Zwischenspeicher
                aufbewahrt
                werden.
            </p>
            <ul>
                <li>
                    <a class="text-warning" href="https://getbootstrap.com/" target="_blank">Bootstrap 4</a>, MIT License, docs CC BY 3.0
                </li>
                <li>
                    Icons by <a class="text-warning" href="https://icons8.com/" target="_blank">Icons8</a>
                </li>
                <li>
                    <a class="text-warning" href="https://jquery.org/" target="_blank">jQuery</a>, MIT License
                </li>
                <li>
                    <a class="text-warning" href="https://popper.js.org/" target="_blank">Popperjs</a>, MIT License
                </li>
                <li>
                    <a class="text-warning" href="https://github.com/sampotts/plyr" target="_blank">Plyr</a>, MIT License
                </li>
                <li>
                    <a class="text-warning" href="https://socket.io/" target="_blank">Socket.IO</a>, MIT License
                </li>
            </ul>
        </div>
    </div>
</footer>

<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.plyr.io/3.6.2/plyr.js"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
<script src="https://apis.google.com/js/api.js"></script>
<script src="room.js"></script>
<script src="player.js"></script>
<script src="events.js"></script>
<script src="/background.js"></script>
</body>
</html>
